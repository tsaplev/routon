(this["webpackJsonpapp-v3"]=this["webpackJsonpapp-v3"]||[]).push([[0],{112:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(15),l=n.n(o),i=(n(60),n(61),n(9)),c=n(8),s=n(11),u=n(5),d=n.n(u),b=n(7),j=n(28),p=n(6),v=n(22),f=n(23),h={plane:{label:"Plane",icon:"\u2708\ufe0f",travelMode:"OTHER"},car:{label:"Car",icon:"\ud83d\ude98",travelMode:"DRIVING"},bus:{label:"Bus",icon:"\ud83d\ude8d",travelMode:"DRIVING"},train:{label:"Train",icon:"\ud83d\ude86",travelMode:"TRANSIT"},ship:{label:"Ship",icon:"\ud83d\udea2",travelMode:"OTHER"},other:{label:"Other",icon:"\u27a1",travelMode:"OTHER"}},g=function(){function e(){Object(v.a)(this,e)}return Object(f.a)(e,null,[{key:"getPath",value:function(){var e=Object(b.a)(d.a.mark((function e(t,n,r){var a,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=[t,n],"OTHER"!==(o=h[r].travelMode)){e.next=4;break}return e.abrupt("return",a);case 4:return e.abrupt("return",new Promise((function(e){var r=new google.maps.DirectionsService,l={origin:t,destination:n,travelMode:google.maps.TravelMode[o]};r.route(l,(function(t,n){var r;if("OK"!==n)return console.error("Directions request failed due to:"+n),e(a);if(null===t||void 0===t||null===(r=t.routes[0])||void 0===r?void 0:r.overview_path){var o=t.routes[0].overview_path.reduce((function(e,t){return[].concat(Object(p.a)(e),[{lat:t.lat(),lng:t.lng()}])}),[]);return e(o)}return e(a)}))})));case 5:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()}]),e}(),m=Object(j.b)("route/addRoute",function(){var e=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.getPath(t.from,t.to,t.transport);case 2:return t.path=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),O=Object(j.c)({name:"route",initialState:{isLoading:!1,routes:[]},reducers:{deleteLastRoute:function(e){e.routes=e.routes.slice(0,-1)},deleteAllRoutes:function(e){e.routes=[]}},extraReducers:function(e){e.addCase(m.pending,(function(e){e.isLoading=!0})),e.addCase(m.fulfilled,(function(e,t){var n=t.payload;e.routes.push(n),e.isLoading=!1})),e.addCase(m.rejected,(function(e){e.isLoading=!1}))}}),x=O.actions,w=x.deleteLastRoute,C=x.deleteAllRoutes,S=function(e){return e.route.routes},y=function(e){return e.route.isLoading},M=O.reducer,k=n(4);function L(){var e=Object(s.c)(S),t=Object(r.useState)(),n=Object(c.a)(t,2),a=n[0],o=n[1],l=Object(r.useState)([]),u=Object(c.a)(l,2),d=u[0],b=u[1];return Object(r.useEffect)((function(){o(new google.maps.Map(document.getElementById("map"),{zoom:2.3,center:{lat:50,lng:80},mapTypeId:"terrain",disableDefaultUI:!0,zoomControl:!0}))}),[]),Object(r.useEffect)((function(){a&&(function(e){e.forEach((function(e){e.setMap(null)}))}(d),function(e,t){var n=new google.maps.LatLngBounds,r={path:google.maps.SymbolPath.CIRCLE,fillColor:"red",fillOpacity:1,scale:10,strokeColor:"white",strokeWeight:1},a=[];t.forEach((function(t,o){var l=new google.maps.LatLng(t.path[0].lat,t.path[0].lng),c=new google.maps.LatLng(t.path[1].lat,t.path[1].lng),s={map:e,label:{text:String(o),color:"white"},icon:r};s.label.text=String(Number(s.label.text)+1);var u=new google.maps.Marker(Object(i.a)(Object(i.a)({},s),{},{position:l}));n.extend(l),a.push(u);var d=new google.maps.Polyline({map:e,path:t.path,geodesic:!0,strokeColor:"#FF0000",strokeOpacity:1,strokeWeight:2});a.push(d),s.label.text=String(Number(s.label.text)+1);var b=new google.maps.Marker(Object(i.a)(Object(i.a)({},s),{},{position:c}));n.extend(c),a.push(b),n.isEmpty()||e.fitBounds(n)})),b(a)}(a,e))}),[a,e,d]),Object(k.jsxs)("div",{className:"dbg-box",children:[Object(k.jsx)("h2",{children:"Map"}),Object(k.jsx)("div",{id:"map",style:{height:"500px"}})]})}function N(){var e=Object(s.c)(S),t=Object(s.b)();return Object(k.jsxs)("div",{className:"table dbg-box",children:[Object(k.jsx)("h2",{children:"List"}),e.map((function(e){var t=Object.assign({},e);return delete t.path,Object(k.jsx)("pre",{style:{background:"lightgray"},children:Object(k.jsx)("p",{children:JSON.stringify(t,null,2)})},t.id)})),Object(k.jsx)("button",{onClick:function(){return t(w())},children:"Delete"}),Object(k.jsx)("button",{onClick:function(){return t(C())},children:"Delete all"})]})}var E=n(53),I=n(45),R=n(49),T=n.n(R),_=n(52);n(67),n(68);function D(){var e,t=Object(s.c)(y),n=Object(s.c)(S),a=Object(s.b)(),o=Object(_.a)({mode:"onSubmit",shouldFocusError:!1,reValidateMode:"onBlur"}),l=o.register,u=o.handleSubmit,d=o.watch,b=o.setValue,j=o.getValues,p=o.reset,v=o.formState.errors;Object(r.useEffect)((function(){0===n.length&&p()}),[n,p]);var f=function(e){var t,a=e.label,o=Object(r.useState)(),s=Object(c.a)(o,2),u=s[0],p=s[1],v=d(a,null),f=null===(t=n[n.length-1])||void 0===t?void 0:t.departure;return Object(k.jsx)(T.a,Object(i.a)(Object(i.a)({},l(a,{required:!0})),{},{selected:u||v,timeInputLabel:"Time:",dateFormat:"MMMM d, HH:mm",showTimeInput:!0,shouldCloseOnSelect:!1,minDate:"departure"===a?f?new Date(f):null:"arrival"===a?j("departure"):void 0,maxDate:"departure"===a?j("arrival"):"arrival"===a?null:void 0,onChange:function(e){p(e)},onCalendarClose:function(){b(a,u)},withPortal:!0,placeholderText:a}))};if(t)return Object(k.jsxs)("div",{className:"dbg-box",children:[Object(k.jsx)("h2",{children:"Form"}),Object(k.jsx)("h2",{children:"Calculating shortest path..."})]});var g=function(){var e,t=null===(e=n[n.length-1])||void 0===e?void 0:e.to;return t?{disabled:!0,value:{gmaps:{name:t.name},location:{lat:t.lat,lng:t.lng}}}:{disabled:!1,value:null}}();return Object(k.jsxs)("div",{className:"dbg-box",children:[Object(k.jsx)("h2",{children:"Form"}),Object(k.jsxs)("form",{autoComplete:"off",onSubmit:u((function(e){var t,n,r,o,l,i;a(m({id:Object(E.a)(),departure:e.departure.toISOString(),arrival:e.arrival.toISOString(),from:{name:null===(t=e.from.gmaps)||void 0===t?void 0:t.name,lat:null===(n=e.from.location)||void 0===n?void 0:n.lat,lng:null===(r=e.from.location)||void 0===r?void 0:r.lng},to:{name:null===(o=e.to.gmaps)||void 0===o?void 0:o.name,lat:null===(l=e.to.location)||void 0===l?void 0:l.lat,lng:null===(i=e.to.location)||void 0===i?void 0:i.lng},transport:e.transport,path:[]})),p()})),children:[Object(k.jsx)("div",{className:"dbg-box__input",style:{borderColor:v.from?"red":"transparent"},children:Object(k.jsx)(I.a,Object(i.a)(Object(i.a)({},l("from",{required:!0,value:j("from")?j("from"):g.value})),{},{initialValue:null===(e=g.value)||void 0===e?void 0:e.gmaps.name,disabled:g.disabled,onChange:function(){},onBlur:function(){},onSuggestSelect:function(e){b("from",e)},autoComplete:"off"}))}),Object(k.jsx)("div",{className:"dbg-box__input",style:{borderColor:v.departure?"red":"transparent"},children:Object(k.jsx)(f,{label:"departure"})}),Object(k.jsx)("div",{className:"dbg-box__input",style:{borderColor:v.transport?"red":"transparent"},children:Object(k.jsxs)("select",Object(i.a)(Object(i.a)({},l("transport",{required:!0})),{},{name:"transport",children:[Object(k.jsx)("option",{hidden:!0,label:" -- "}),Object.entries(h).map((function(e){var t=Object(c.a)(e,2),n=t[0],r=t[1];return Object(k.jsx)("option",{value:n,children:r.label},n)}))]}))}),Object(k.jsx)("div",{className:"dbg-box__input",style:{borderColor:v.to?"red":"transparent"},children:Object(k.jsx)(I.a,Object(i.a)(Object(i.a)({},l("to",{required:!0})),{},{onChange:function(){},onBlur:function(){},onSuggestSelect:function(e){b("to",e)},autoComplete:"off"}))}),Object(k.jsx)("div",{className:"dbg-box__input",style:{borderColor:v.arrival?"red":"transparent"},children:Object(k.jsx)(f,{label:"arrival"})}),Object(k.jsx)("button",{type:"submit",children:"Add"})]})]})}var B=function(){return Object(k.jsxs)("div",{className:"layout",children:[Object(k.jsx)(L,{}),Object(k.jsx)(N,{}),Object(k.jsx)(D,{})]})},P=Object(j.a)({reducer:{route:M}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(Object(k.jsx)(a.a.StrictMode,{children:Object(k.jsx)(s.a,{store:P,children:Object(k.jsx)(B,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},60:function(e,t,n){},61:function(e,t,n){},68:function(e,t,n){}},[[112,1,2]]]);
//# sourceMappingURL=main.0ce7d920.chunk.js.map